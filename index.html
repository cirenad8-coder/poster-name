<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>بوستر بالاسم</title>

  <style>
    body {
      margin: 0;
      background: #000;
      font-family: Zarid, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      padding: 20px;
    }

    input {
      width: 300px;
      padding: 10px;
      font-size: 18px;
      text-align: center;
    }

    button {
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
    }

    canvas {
      max-width: 100%;
    }
  </style>

  <!-- تعريف الخط -->
  <style>
    @font-face {
      font-family: 'Zarid';
      src: url('./29LTZaridSans-Regular.otf') format('opentype');
    }
  </style>
</head>

<body>

  <input
    id="nameInput"
    type="text"
    placeholder="اكتب الاسم هنا"
  />

  <button id="download">تحميل الصورة</button>

  <canvas id="c"></canvas>

  <script>
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');

    const img = new Image();
    img.src = './poster.jpg';

    // ==== إعدادات الاسم (مضبوطة مثل ما طلبتي) ====
    const FONT_SIZE = 90;        // مقاس الاسم
    const SIDE_MARGIN = 400;     // يمين 400 + يسار 400
    const NAME_Y = 900;          // مكان الاسم عموديًا
    // ============================================

    img.onload = () => {
      canvas.width = img.width;
      canvas.height = img.height;
      draw('');
    };

    function draw(text) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(img, 0, 0);

      ctx.font = `${FONT_SIZE}px Zarid`;
      ctx.fillStyle = '#ffffff';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.direction = 'rtl';

      const maxWidth = canvas.width - (SIDE_MARGIN * 2);

      ctx.fillText(
        text,
        canvas.width / 2,
        NAME_Y,
        maxWidth
      );
    }

    document
      .getElementById('nameInput')
      .addEventListener('input', (e) => {
        draw(e.target.value);
      });

    document
      .getElementById('download')
      .addEventListener('click', () => {
        const a = document.createElement('a');
        a.href = canvas.toDataURL('image/png');
        a.download = 'poster.png';
        a.click();
      });
  </script>

</body>
</html>
